name: Hugging Face Space Keep-Alive

on:
  schedule:
    # Runs every day at 5:30 UTC. This is more than enough to prevent the 48-hour sleep.
    - cron: '30 5 * * *'
  workflow_dispatch:
    # Allows you to manually trigger the workflow from the Actions tab on GitHub.

jobs:
  restart-space:
    runs-on: ubuntu-latest
    steps:
      - name: Restart Hugging Face Space
        run: |
          # Send a POST request to the Hugging Face API to restart the Space.
          # This is the most reliable method to keep a Space from sleeping.
          curl -v -X POST \
            -H "Authorization: Bearer ${{ secrets.HF_TOKEN }}" \
            "https://huggingface.co/api/spaces/stevewang11/n8n-free/restart"